{% extends "base.html" %}

{% block title %} Profile {% endblock title %}

<!-- Main page -->
{% block content %}
<h1>Profile</h1>
<ul>
    <li><a href="{% url 'user_app:logout'%}">Log out</a></li>
    <li><a href="#">Delete account</a></li>
</ul>
<div>
    <h2>Welcome {{user.username}}</h2>
    <div>

    <table>
        <tr>
            <th>Type</th>
            <th>Title</th>
            <th>Author</th>
            <th>Publisher</th>
            <th>Days left</th>
            <th>Returned</th>
            <th>Manage</th>
        </tr>
            {% for bookloan in bookloans %}
                <tr>
                    <td>Book</td>
                    <td>{{bookloan.book.title}}</td>
                    <td>{{bookloan.book.author}}</td>
                    <td>{{bookloan.book.publisher}}</td>
                    <td>{{bookloan.daysLeft}} days</td>
                    <td>{% if bookloan.returned_timestamp is not None %} Yes {% else %} No {% endif %}</td>
                    <td>{% if bookloan.returned_timestamp is not None %} Returned {% else %}<a href="{% url "user_app:return_item" "book" bookloan.book.id%}">Return</a> {% endif %}</td>
                </tr>
            {% endfor %}
            {% for magazineloan in magazineloans %}
                <tr>
                    <td>Magazine</td>
                    <td>{{magazineloan.magazine.title}}</td>
                    <td>{{magazineloan.magazine.author}}</td>
                    <td>{{magazineloan.magazine.publisher}}</td>
                    <td>{{magazineloan.daysLeft}} days</td>
                    <td>{% if magazineloan.returned_timestamp is not None %} Yes {% else %} No {% endif %}</td>
                    <td>{% if magazineloan.returned_timestamp is not None %} Returned {% else %}<a href="{% url "user_app:return_item" "magazine" magazineloan.magazine.id%}">Return</a> {% endif %}</td>
                </tr>
            {% endfor %}
        </table>
    </div>
</div>

{% if error_message %} <p>{{error_message}}</p> {% endif %}
{% endblock content %}